<html>
	<head>
		<title>QR code</title>
		<meta charset="utf-8">
	  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
		<script type="text/javascript" src="instascan.min.js"></script>
	  	<!-- CSS  -->
	  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

	<body>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

        <div class="container_0_46vw">
            <div class="mx_11vw mt_9vw mb_4_63vw fs_7vw_b">
                <div class="left-align"><span>請輸入發票號碼</span></div>
                <div class="row">
                    <div class="mt_6vw"><input id="cellphone" type="tel" class="validate col s8" style="height:10vw; margin-bottom: 0;"></div>
                    <div onclick="vaildphone_vote()" class="width_20vw div_btn fc_fff bgcolor_06c fs_6vw_b right center-align height_10vw pt_1vw" id="submit">送出</div>
                </div>
                <div id="error_msg" class="fs_5vw_n fc_red">發票號碼輸入錯誤</div>
                <div class="mb_3vw center">或</div>
                <!-- <div class="div_btn_10 bgcolor_f44336 width_30vw height_25vw fs_8vw_n fc_fff center-align mx_auto" style="line-height: 25vw;">掃描去</div> -->
				<a id="modallink" class="div_btn_10 bgcolor_f44336 width_30vw height_25vw fs_8vw_n fc_fff center-align mx_auto waves-effect waves-light btn modal-trigger" style="line-height: 25vw;" href="#modal">掃描去</a>
            </div>
        </div>

		  <!-- modal 跳出的訊息 -->
		  <div id="modal" class="modal modal-fixed-footer">
			  <div class="modal-content">
						<div class="modal-body">	
							<video id="preview" width="100%" height="100%"></video>
							<script type="text/javascript">
								let scanner = new Instascan.Scanner({ video: document.getElementById('preview'), mirror: false });
								scanner.addListener('scan', function (content) {
									document.getElementById("cellphone").value = content;
									$('#modal').modal('close');
									scanner.stop();
								});
								
							</script>
				</div>
					</div>
		  </div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
		<script type="text/javascript">
			$( document ).ready(function() {
			  $('.modal').modal({
					ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
						Instascan.Camera.getCameras().then(function (cameras) {
							if (cameras.length > 0) {
								scanner.start(cameras[0]);
							} else {
								console.error('No cameras found.');
							}
						}).catch(function (e) {
							console.error(e);
						});
					}
				});
			});
		</script>
    </body>
</html>
